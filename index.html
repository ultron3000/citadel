<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Citadel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #111;
    }
    ::-webkit-scrollbar-thumb {
      background: #ffcc00;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #ffdd33;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in { animation: fadeIn 0.5s ease-out forwards; }
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    .delay-4 { animation-delay: 0.4s; }
    .delay-5 { animation-delay: 0.5s; }
    
    .glow-effect { position: relative; }
    .glow-effect::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(255, 204, 0, 0);
      transition: box-shadow 0.3s ease;
      pointer-events: none;
    }
    .glow-effect:hover::after { box-shadow: 0 0 15px rgba(255, 204, 0, 0.7); }
    
    .gradient-text {
      background: linear-gradient(90deg, #ffcc00, #ff9900);
      -webkit-background-clip: text;
      color: transparent;
    }
    
    .showcase-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }
    
    .showcase-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to right, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0) 100%);
      z-index: 1;
    }
    .showcase-content { position: relative; z-index: 2; }

    .video-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
    }

    .video-container iframe,
    .video-container video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body class="bg-black text-gray-100 min-h-screen">

<header class="sticky top-0 z-50 bg-black bg-opacity-90 backdrop-blur-sm border-b border-yellow-600/20">
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    <div class="flex items-center space-x-2">
      <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center">
        <i class="fas fa-shield-alt text-black text-xl"></i>
      </div>
      <h1 class="text-2xl font-bold gradient-text">CITADEL</h1>
    </div>
    
    <div class="flex items-center space-x-4">
      <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-800 transition">
        <i class="fas fa-moon text-yellow-500"></i>
      </button>
      <button id="search-btn" class="p-2 rounded-full hover:bg-gray-800 transition">
        <i class="fas fa-search text-yellow-500"></i>
      </button>
    </div>
  </div>

  <div id="search-bar" class="hidden px-4 pb-4">
    <div class="relative">
      <input type="text" placeholder="Search episodes..." 
             class="w-full bg-gray-900 border border-yellow-600/30 rounded-full py-2 px-4 pl-10 text-white">
      <i class="fas fa-search absolute left-3 top-3 text-yellow-500"></i>
    </div>
  </div>
</header>

<main class="container mx-auto px-4 py-8">
  <section class="mb-12 relative overflow-hidden rounded-xl h-64 md:h-96">
    <video autoplay muted loop class="showcase-video">
      <source src="https://imdb-video.media-imdb.com/vi2384053273/1434659607842-pgv4ql-1680186912627.mp4?Expires=1762039966&Signature=jprEwKef4B4nLbnUYz0Zx9u4x4wlAWr0tfWqNE5pIqy1hC-jNoCpj24Eo9mTbGIVQjJkzJZAQLDmpfIf6aOM~4ZoVr9taie-0Ms6QGqsewgPfMxqFMVtOE~DXxN-rc9kjMM1OSf-~QPaay0AUKPRZQUtlJbK5gyF7xN34RA8GVQb3Z0yZfNVPLaMlEJ8TrvnOzTG6-8CUyIw38mwNxau5ixwFPriyrBMa9-IPJKsq3cXs8eoNpRgRwOvym4LgeZvU4LyOnSc1ZbRsUl0437m-VpIVgUe4nnFQG5BRE8PCGY7Cz-EJMZX3D9r1Q~aFDPF46K3HKIFoY35nJ1TMgPDBA__&Key-Pair-Id=APKAIFLZBVQZ24NQH3KA" type="video/mp4">
    </video>
    <div class="showcase-overlay"></div>
    <div class="showcase-content h-full flex flex-col justify-end p-6 md:p-8">
      <p class="text-gray-300 mb-4 max-w-lg">Global spy agency Citadel has fallen, and its agents' memories were wiped clean. Now the powerful syndicate, Manticore, is rising in the void. Can the Citadel agents recollect their past and summon the strength to fight back?</p>
    </div>
  </section>

  <div class="flex overflow-x-auto mb-6 pb-2">
    <div class="flex space-x-2">

    </div>
  </div>

  <div class="flex flex-wrap justify-between mb-8 gap-4">
    <div class="flex space-x-2 overflow-x-auto pb-2">
 
    </div>
  </div>

  <section>
    <h3 class="text-xl font-semibold mb-6"><i class="fas fa-list-ul text-yellow-500 mr-2"></i>Episodes</h3>
    <div id="movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"></div>
  </section>
</main>

<footer class="bg-gray-900 border-t border-gray-800 mt-12 py-8 text-center text-gray-400">
  © CITADEL Productions
</footer>

<!-- Playback Modal -->
<div id="playback-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black bg-opacity-90">
  <div class="relative w-full max-w-4xl bg-gray-900 rounded-xl overflow-hidden">
    <button id="close-modal" class="absolute top-4 right-4 text-white text-2xl">&times;</button>
    <div class="video-container">
      <video id="modal-video" class="w-full" controls></video>
    </div>
    <div class="p-6">
      <h3 id="modal-title" class="text-2xl font-bold mb-2"></h3>
      <div id="season-episode" class="text-gray-400 text-sm mb-2"></div>
      <div id="episode-duration" class="text-gray-400 text-sm mb-4"></div>
      <p id="modal-description" class="text-gray-300"></p>
    </div>
  </div>
</div>

<script>
// ========= EPISODE DATA =========
const movies = [
      // Season 1
      { 
        title: "The Human Enigma", 
        video: "https://s3ae.evergreenconstruction.store/v4/il/hde6j/cf-master.txt?v=1730755972", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/7cf708aacfcd9cf0afc502de08cceedb147b9360bc339863382d908e6175c229._BR-6_AC_SX720_FMwebp_.jpg",
        description: "A former Citadel agent is pulled back into the world of espionage when a mysterious figure from his past resurfaces with critical information.",
        duration: "48 min"
      },
      { 
        title: "Spies Appear In Night Time", 
        video: "https://sunl.aurorapathcreative.space/v4/il/ty38g/index-f1-v1-a1.txt", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/ec29785457e5f3d56591cf719a52f2214f56c1b5e73a8008eb1a19403b3a5fe7._BR-6_AC_SX720_FMwebp_.jpg",
        description: "Under the cover of darkness, agents from rival factions converge on a single location, each with their own hidden agenda.",
        duration: "52 min"
      },
      { 
        title: "Infinite Shadows", 
        video: "https://sbi6.marvellaholdings.sbs/v4/il/k89pz/cf-master.txt?v=1730756078", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/419b4b78422a757495927075fa7937109e1afcb5ecd822195b848616eb6eaa3b._BR-6_AC_SX720_FMwebp_.jpg",
        description: "As the web of deception grows more complex, our agents must navigate a maze of shifting alliances where nothing is as it seems.",
        duration: "49 min"
      },
      { 
        title: "Tell Her Everything", 
        video: "https://s5zt.viatrixartstudio.space/v4/ty/3fcqs/index-f2-v1-a1.txt", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/0bc6a90b9ed854667c73f00b061c7c2f11c945f753ac9ba274487388c994f882._BR-6_AC_SX720_FMwebp_.jpg",
        description: "A critical decision must be made - reveal the truth and risk everything, or maintain the lie and lose what matters most.",
        duration: "51 min"
      },
      { 
        title: "Time Renders Us Enemies", 
        video: "https://s6sy.silverpathway.sbs/v4/ty/id661/cf-master.txt?v=1731438121", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/58bd4313c91e6769a7399a3c22ee3692dd008c38a972c8984654e2d22725af45._BR-6_AC_SX720_FMwebp_.jpg",
        description: "Past actions come back to haunt our agents as former allies become adversaries in a high-stakes confrontation.",
        duration: "47 min"
      },
      { 
        title: "Secrets In Night Need Early Rains", 
        video: "https://sxix.skylineforge.space/v4/ty/hde6b/index-f2-v1-a1.txt", 
        image: "https://m.media-amazon.com/images/S/pv-target-images/3c1ed5d5eb7012b8a83a09fee5523cb733fdc3bb4db8ff3ae0c1476c406b28df._BR-6_AC_SX720_FMwebp_.jpg",
        description: "The season finale brings all the threads together as hidden truths are revealed and loyalties are put to the ultimate test.",
        duration: "58 min"
      },
      
     
    ];


/* ✅ Add Spy-Kids MP4 detector */
function isMP4(url) {
  return /\.mp4($|\?)/i.test(url);
}

/* DOM elements */
const container = document.getElementById('movies');
const playbackModal = document.getElementById('playback-modal');
const modalVideo = document.getElementById('modal-video');
const modalTitle = document.getElementById('modal-title');
const modalDescription = document.getElementById('modal-description');
const seasonEpisode = document.getElementById('season-episode');
const episodeDuration = document.getElementById('episode-duration');
const closeModal = document.getElementById('close-modal');

let currentSeason = 'all';
let currentFilter = 'All';

function initPage() {
  renderMovies();
  document.querySelectorAll('.season-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelector('.season-btn.active').classList.remove('active', 'bg-yellow-600', 'text-black');
      this.classList.add('active', 'bg-yellow-600', 'text-black');
      currentSeason = this.dataset.season;
      renderMovies();
    });
  });

  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelector('.filter-btn.active').classList.remove('active', 'bg-yellow-600', 'text-black');
      this.classList.add('active', 'bg-yellow-600', 'text-black');
      currentFilter = this.textContent;
      renderMovies();
    });
  });
}

function renderMovies() {
  container.innerHTML = '';
  let filtered = movies;
  if (currentSeason !== 'all') filtered = filtered.filter(m => m.season == currentSeason);
  if (currentFilter !== 'All') filtered = filtered.filter(m => m.tags.includes(currentFilter));

  filtered.forEach((movie, i) => {
    const card = document.createElement('div');
    card.className = `movie-card fade-in delay-${i%5} glow-effect`;
    card.innerHTML = `
      <div class="relative group cursor-pointer overflow-hidden rounded-xl">
        <img src="${movie.image}" class="w-full h-48 object-cover rounded-xl transition group-hover:scale-105">
        <div class="absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 flex items-center justify-center text-yellow-500 text-3xl"><i class="fas fa-play"></i></div>
      </div>
      <div class="mt-3 text-white font-medium">${movie.title}</div>
      <div class="text-gray-400 text-sm">S${movie.season} • E${movie.episode} • ${movie.duration}</div>
    `;

    /* ✅ Spy-Kids logic applied */
    card.addEventListener('click', () => {
      if (isMP4(movie.video)) {
        openModal(movie);
      } else {
        window.location.href =
          `player.html?title=${encodeURIComponent(movie.title)}&video=${encodeURIComponent(movie.video)}`;
      }
    });

    container.appendChild(card);
  });
}

function openModal(m) {
  modalTitle.textContent = m.title;
  modalDescription.textContent = m.description;
  seasonEpisode.textContent = `S${m.season} • E${m.episode}`;
  episodeDuration.textContent = m.duration;
  modalVideo.src = m.video;
  playbackModal.classList.remove('hidden');
}

closeModal.onclick = () => { playbackModal.classList.add('hidden'); modalVideo.pause(); };

window.addEventListener('DOMContentLoaded', initPage);
</script>

</body>
</html>
